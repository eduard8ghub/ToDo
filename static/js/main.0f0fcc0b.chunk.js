(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/remove.95f30ee9.svg"},34:function(e,t,a){e.exports=a.p+"static/media/add.04bce1ba.svg"},35:function(e,t,a){e.exports=a.p+"static/media/edit.e6d3868a.svg"},36:function(e,t,a){e.exports=a.p+"static/media/check.2719c90b.svg"},51:function(e,t,a){},54:function(e,t,a){e.exports=a.p+"static/media/list.a688c249.svg"},59:function(e,t,a){e.exports=a.p+"static/media/close.10c581b6.svg"},60:function(e,t,a){e.exports=a(92)},68:function(e,t,a){},69:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(28),c=a.n(i),r=a(21),o=a(22),l=a(24),u=a(23),m=a(25),p=a(11),d=a(19),f=(a(68),a(3)),b=a.n(f),E=(a(69),function(e){var t=e.colors,a=e.onClick,n=e.className;return s.a.createElement("i",{className:"badge badge--".concat(t," ")+b()(n),onClick:a})}),k=s.a.memo((function(e){var t=e.lists,a=e.isRemovable,i=e.iconRemove,c=e.onSetVisiblePopup,r=e.deleteList,o=e.setActiveItem,l=e.activeItem,u=e.onAddTask,m=e.isTasksList,p=e.isAllList,f=Object(d.e)();return Object(n.useEffect)((function(){var e=f.location.pathname.split("lists/")[1];o&&o(Number(e)-1)}),[f.location.pathname]),s.a.createElement("ul",{className:b()("todo__list",{list__removable:a}),onClick:m?u:c},t.map((function(e,t){return s.a.createElement("li",{key:t,className:b()({removable:a,active:t===l}),onClick:a?function(t){"IMG"!==t.target.tagName&&f.push("/lists/".concat(e.id))}:p&&function(){f.push("/lists")}},s.a.createElement("i",null,e.icon?s.a.createElement("img",{src:e.icon,alt:"icon"}):s.a.createElement(E,{colors:e.color.name})),s.a.createElement("span",{className:"name--item"},e.name),a&&s.a.createElement("span",{className:"count__list"},"(",e.tasks.length,")"),a&&s.a.createElement("span",{className:"remove_item",onClick:function(){f.push("/lists/1"),r(e.id)}},s.a.createElement("img",{src:i,alt:"X"})))})))})),T=a(54),h=a.n(T),v=a(30),g=a.n(v),O=a(31),_=a(55);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach((function(t){Object(O.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N=a.n(_).a.create({baseURL:"http://localhost:3001/"}),S=function(){return N.get("/lists?_expand=color&_embed=tasks").then((function(e){return e.data}))},C=function(e,t){return N.post("/lists?_expand=color&_embed=tasks",{name:e,colorId:t.id,tasks:[],color:j({},t)}).then((function(e){return e.data}))},I=function(e){return N.delete("/lists/".concat(e))},x=function(){return N.get("/colors").then((function(e){return e.data}))},P=function(){return N.get("/lists?_expand=color&_embed=tasks").then((function(e){return e.data}))},L=function(e,t){return N.patch("/lists/".concat(t,"/?_expand=color&_embed=tasks"),{name:e}).then((function(e){return e.data}))},A=function(e,t){return N.post("/tasks",{listId:t,text:e,completed:!1}).then((function(e){return e.data}))},w=function(e,t){return N.patch("/tasks/".concat(t),{completed:e}).then((function(e){return e.data}))},D=function(e,t){return N.patch("/tasks/".concat(t),{text:e}).then((function(e){return e.data}))},V=function(e){return N.delete("/tasks/".concat(e))},K=function(){return{type:"SET_VISIBLE_POPUP"}},H=a(13),F=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={localLists:[{name:"\u0412\u0441\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",icon:h.a}]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getListsTasks(),this.props.getColors()}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(k,{lists:this.state.localLists,isAllList:!0}),this.props.lists.length>0&&s.a.createElement(k,{lists:this.props.lists,activeItem:this.props.activeItem,deleteList:this.props.deleteList,setActiveItem:this.props.setActiveItem,isRemovable:!0,iconRemove:g.a}))}}]),t}(n.Component),G=Object(H.d)(Object(p.b)((function(e){var t=e.lists;return{lists:t.lists,activeItem:t.activeItemLists}}),{getListsTasks:function(){return function(e){S().then((function(t){e({type:"SET_LISTS",payload:t})}))}},getColors:function(){return function(e){x().then((function(t){e({type:"SET_COLORS",payload:t})}))}},deleteList:function(e){return function(t){I(e).then((function(){t(function(e){return{type:"DELETE_LIST",payload:e}}(e))}))}},setActiveItem:function(e){return{type:"SET_ACTIVE_ITEM",payload:e}}}))(F),R=a(56),X=a(17);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(O.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W={lists:[],colors:[],visiblePopup:!1,activeItemLists:0},U=Object(H.c)({lists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COLORS":return M({},e,{colors:t.payload});case"SET_LISTS":return M({},e,{lists:Object(X.a)(t.payload)});case"ADD_NEW_LIST":return M({},e,{lists:[].concat(Object(X.a)(e.lists),[t.payload])});case"DELETE_LIST":return M({},e,{lists:e.lists.filter((function(e){return e.id!==t.payload}))});case"SET_VISIBLE_POPUP":return M({},e,{visiblePopup:!e.visiblePopup});case"SET_ACTIVE_ITEM":return M({},e,{activeItemLists:t.payload});case"CHANGE_TASK_TITLE":return M({},e,{lists:[].concat(Object(X.a)(e.lists),Object(X.a)(e.lists.filter((function(e){return e.id===t.payload.id&&e.name!==t.payload.name&&(e.name=t.payload.name),!1}))))});case"ADD_NEW_TASK":return M({},e,{lists:Object(X.a)(e.lists.filter((function(e){return e.id===t.payload.listId?e.tasks.push(t.payload):e})))});case"CHANGE_TASK_CHECK":return M({},e,{lists:Object(X.a)(e.lists.filter((function(e){return e.id===t.payload.listId?(e.tasks.filter((function(e){if(e.id===t.payload.id)return e.completed=t.payload.completed})),e):e})))});case"CHANGE_TASK_TEXT":return M({},e,{lists:Object(X.a)(e.lists.filter((function(e){return e.id===t.payload.listId?(e.tasks.filter((function(e){if(e.id===t.payload.id)return e.text=t.payload.text})),e):e})))});case"DELETE_TASK":return M({},e,{lists:Object(X.a)(e.lists.map((function(e){return e.id===t.listId&&(e.tasks=e.tasks.filter((function(e){return e.id!==t.id}))),e})))});default:return e}}}),J=a(7),q=(a(88),a(89),a(16)),z=function(e){var t=e.onHiddenInput,a=e.taskId,n=e.addNewTask;return s.a.createElement("div",{className:"add-task__input"},s.a.createElement(q.b,{initialValues:{taskText:""},validate:function(e){var t={};return e.taskText||(t.taskText="\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u043f\u043a\u0438 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),t},onSubmit:function(e,s){s.setSubmitting;n(e.taskText,a),t(!1)}},(function(e){var a=e.values,n=e.errors,i=e.handleChange,c=e.handleSubmit,r=e.isSubmitting;return s.a.createElement("form",{onSubmit:c},s.a.createElement("input",{type:"text",className:b()("field",{inputError:n.taskText}),placeholder:"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438",name:"taskText",onChange:i,value:a.taskText,autoComplete:"off"}),s.a.createElement(q.a,{name:"taskText",render:function(e){return s.a.createElement("div",{className:"err"},e)}}),s.a.createElement("div",{className:"wrap__button"},s.a.createElement("button",{type:"submit",className:"button button-add__task",disabled:r},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"),s.a.createElement("button",{className:"button button-cancel",onClick:function(){t(!1)}},"\u041e\u0442\u043c\u0435\u043d\u0430")))})))},Q=a(34),Y=a.n(Q),Z=a(35),$=a.n(Z),ee=function(e){var t=e.changeTaskTitle,a=e.itemTask,i=Object(n.useState)(!1),c=Object(J.a)(i,2),r=c[0],o=c[1],l=Object(n.useState)(null),u=Object(J.a)(l,2),m=u[0],p=u[1],d=Object(n.useState)(null),f=Object(J.a)(d,2),b=f[0],E=f[1];return Object(n.useEffect)((function(){!1===r&&m&&t(b,m)}),[b,r,m,t]),s.a.createElement("div",{className:"todo__tasks-title"},r&&a.id===m?s.a.createElement("input",{type:"text",value:b,autoFocus:!0,onBlur:function(){o(!1)},onChange:function(e){E(e.target.value)}}):s.a.createElement("span",{style:{color:"".concat(a.color.hex)}},a.name),s.a.createElement("i",{onClick:function(){p(a.id),o(!r),E(a.name)}},s.a.createElement("img",{src:$.a,alt:"edit"})))},te=a(36),ae=a.n(te),ne=function(e){var t=e.task,a=e.onChangeTaskText,n=e.setCloseInput;return s.a.createElement("div",{className:"change__task"},s.a.createElement(q.b,{initialValues:{taskText:t.text},validate:function(e){var t={};return e.taskText||(t.taskText="\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u043f\u043a\u0438 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),t},onSubmit:function(e,s){s.setSubmitting;a(e.taskText,t.id),n(null)}},(function(e){var t=e.values,a=e.errors,n=e.handleChange,i=e.handleSubmit,c=e.isSubmitting;return s.a.createElement("form",{onSubmit:i},s.a.createElement("input",{type:"text",className:b()("field",{inputError:a.taskText}),name:"taskText",onChange:n,value:t.taskText,autoComplete:"off",autoFocus:!0}),s.a.createElement(q.a,{name:"taskText",render:function(e){return s.a.createElement("div",{className:"err"},e)}}),s.a.createElement("button",{type:"submit",className:"button button-add__task",disabled:c},s.a.createElement("img",{src:ae.a,alt:"ok"})))})))},se=function(e){var t=e.task,a=e.changeTaskCheck,n=e.deleteTaskItem,i=e.taskIdToChange;return s.a.createElement("div",{className:"content__tasks"},s.a.createElement("i",{className:b()("check",{checked:t.completed}),onClick:function(){a(!t.completed,t.id)}},s.a.createElement("img",{src:ae.a,alt:"icon"})),s.a.createElement("span",null,t.text),s.a.createElement("i",{className:"edit_item",onClick:function(){i(t.id)}},s.a.createElement("img",{src:$.a,alt:"edit"})),s.a.createElement("i",{className:"remove_item",onClick:function(){n(t.id,t.listId)}},s.a.createElement("img",{src:g.a,alt:"X"})))},ie=function(e){var t=e.listTasks,a=e.changeTaskTitle,i=e.changeTaskCheck,c=e.onChangeTaskText,r=e.deleteTaskItem,o=e.addNewTask,l=Object(n.useState)(t.length?t:[t]),u=Object(J.a)(l,2),m=u[0],p=u[1],d=Object(n.useState)(null),f=Object(J.a)(d,2),b=f[0],E=f[1],T=Object(n.useState)(!1),h=Object(J.a)(T,2),v=h[0],g=h[1],O=Object(n.useState)(!1),_=Object(J.a)(O,2),y=_[0],j=_[1];return Object(n.useEffect)((function(){p(t.length?t:[t])}),[t]),s.a.createElement(s.a.Fragment,null,m.map((function(e){return s.a.createElement("div",{key:e.id},s.a.createElement(ee,{changeTaskTitle:a,itemTask:e}),s.a.createElement("ul",{className:"tasks__list"},e.tasks.map((function(e){return s.a.createElement("li",{className:"tasks__list-item",key:e.id},b&&b===e.id?s.a.createElement(ne,{task:e,onChangeTaskText:c,setCloseInput:E}):s.a.createElement(se,{task:e,changeTaskCheck:i,deleteTaskItem:r,taskIdToChange:E}))}))),v&&e.id===y?s.a.createElement(z,{taskId:e.id,onHiddenInput:g,addNewTask:o}):s.a.createElement(k,{lists:[{name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0430\u043f\u043a\u0443",icon:Y.a}],isTasksList:!0,onAddTask:function(t){g(!0),j(e.id)}}))})))},ce=s.a.memo((function(e){e.activeItemList;var t=e.changeTaskTitle,a=e.addNewTask,i=e.changeTaskCheck,c=e.listTasks,r=e.onChangeTaskText,o=e.deleteTaskItem,l=Object(n.useState)(0),u=Object(J.a)(l,2),m=u[0],p=u[1],f=Object(d.e)().location.pathname;return Object(n.useEffect)((function(){var e=f.split("/lists/");p(Number(e[1])-1)}),[f]),s.a.createElement(s.a.Fragment,null,s.a.createElement(ie,{listTasks:isNaN(m)?c:c[m],changeTaskTitle:t,changeTaskCheck:i,onChangeTaskText:r,deleteTaskItem:o,addNewTask:a}))})),re=(a(51),a(59)),oe=a.n(re),le=function(e){var t=e.colors,a=e.setVisiblePopup,i=e.visiblePopup,c=e.addList,r=Object(n.useState)(t[0]),o=Object(J.a)(r,2),l=o[0],u=o[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:b()("add-list__popup",{visible__popup:i})},s.a.createElement(q.b,{initialValues:{listName:"",color:l},validate:function(e){var t={};return e.listName||(t.listName="\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u043f\u043a\u0438 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),t},onSubmit:function(e,t){var n=t.setSubmitting;c(e.listName,e.color),e.listName="",n(!1),a()}},(function(e){var n=e.values,i=e.errors,c=e.handleChange,r=e.handleSubmit,o=e.isSubmitting;return s.a.createElement("form",{onSubmit:r},s.a.createElement("input",{type:"text",className:b()("field",{inputError:i.listName}),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u043f\u043a\u0438",name:"listName",onChange:c,value:n.listName,autoComplete:"off"}),s.a.createElement(q.a,{name:"listName",render:function(e){return s.a.createElement("div",{className:"err"},e)}}),s.a.createElement("div",{className:"add-list__popup-colors"},t.map((function(e,t){return s.a.createElement(E,{onClick:function(){u(e),n.color=e},colors:e.name,key:t,className:l.id===e.id&&"active"})}))),s.a.createElement("div",{className:"add-list__popup-close",onClick:function(){a()}},s.a.createElement("img",{src:oe.a,alt:"X"})),s.a.createElement("button",{type:"submit",disabled:o,className:"button"},o?"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f...":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))}))))},ue=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.props.colors&&this.props.colors.length>0&&s.a.createElement(le,{colors:this.props.colors,visiblePopup:this.props.visiblePopup,setVisiblePopup:this.props.setVisiblePopup,addList:this.props.addList}))}}]),t}(n.Component),me=Object(p.b)((function(e){return{colors:e.lists.colors,visiblePopup:e.lists.visiblePopup}}),{setVisiblePopup:K,addList:function(e,t){return function(a){C(e,t).then((function(e){a(function(e){return{type:"ADD_NEW_LIST",payload:e}}(e))}))}}})(ue),pe=function(e){var t=e.setVisiblePopup;return s.a.createElement("div",{className:"add-list"},s.a.createElement(k,{lists:[{name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0430\u043f\u043a\u0443",icon:Y.a}],onSetVisiblePopup:function(){t()}}),s.a.createElement(me,null))};var de=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(pe,{visiblePopup:this.props.visiblePopup,setVisiblePopup:this.props.setVisiblePopup}))}}]),t}(n.Component),fe=Object(p.b)((function(e){return{visiblePopup:e.lists.visiblePopup}}),{setVisiblePopup:K})(de),be=Object(p.b)((function(e){var t=e.lists;return{activeItemList:t.activeItemLists,listTasks:t.lists}}),{getTasks:function(){return function(e){P().then((function(t){e({type:"SET_TASKS",payload:t})}))}},changeTaskTitle:function(e,t){return function(a){L(e,t).then((function(e){a({type:"CHANGE_TASK_TITLE",payload:e})}))}},addNewTask:function(e,t){return function(a){A(e,t).then((function(e){a({type:"ADD_NEW_TASK",payload:e})}))}},changeTaskCheck:function(e,t){return function(a){w(e,t).then((function(e){a({type:"CHANGE_TASK_CHECK",payload:e})}))}},onChangeTaskText:function(e,t){return function(a){D(e,t).then((function(e){a({type:"CHANGE_TASK_TEXT",payload:e})}))}},deleteTaskItem:function(e,t){return function(a){V(e).then((function(n){a(function(e,t){return{type:"DELETE_TASK",id:e,listId:t}}(e,t))}))}}})((function(e){var t=e.getTasks,a=e.activeItemList,i=e.changeTaskTitle,c=e.addNewTask,r=e.changeTaskCheck,o=e.listTasks,l=e.onChangeTaskText,u=e.deleteTaskItem;return Object(n.useEffect)((function(){t()}),[t]),s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{path:"/lists"},o&&o.length>0&&s.a.createElement(ce,{listTasks:o,activeItemList:a,changeTaskTitle:i,addNewTask:c,changeTaskCheck:r,onChangeTaskText:l,deleteTaskItem:u})))})),Ee=Object(H.e)(U,Object(H.a)(R.a));window.store=Ee;var ke=function(){return s.a.createElement(p.a,{store:Ee},s.a.createElement("div",{className:"wrap"},s.a.createElement("div",{className:"todo"},s.a.createElement("div",{className:"todo__sidebar"},s.a.createElement(G,null),s.a.createElement(fe,null)),s.a.createElement("div",{className:"todo__tasks"},s.a.createElement(be,null)))))},Te=a(26);a(91);c.a.render(s.a.createElement(Te.a,null,s.a.createElement(ke,null)),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.0f0fcc0b.chunk.js.map